<!--================Slider Area =================-->
<section class="slider_area">
    <div class=slider_inner>
        <div class="rev_slider fullwidthabanner"  data-version="5.3.0.2" id="home-slider">
            <ul> 
                <li data-slotamount="7" data-easein="Power4.easeInOut" data-easeout="Power4.easeInOut" data-masterspeed="600" data-rotate="0" data-saveperformance="off">
                    <!-- MAIN IMAGE -->
                    <img src="<?php echo base_url('uploads/img/home-slider/slider-1.jpg'); ?>"  alt=""  data-bgposition="center center" data-bgfit="cover" data-bgrepeat="no-repeat" data-bgparallax="10" class="rev-slidebg" data-no-retina>
                    <!-- LAYERS -->

                    <!-- LAYER NR. 1 -->
                    <div class="slider_text_box">
                       <div class="tp-caption bg_box" 
                            data-width="none"
                            data-height="none"
                            data-whitespace="nowrap"
                            data-x="center" 
                            data-y="['350','350','300','250','0']"
                            data-fontsize="['55']" 
                            data-lineheight="['60']" 
                            data-transform_idle="o:1;"
                            data-transform_in="y:[-100%];z:0;rX:0deg;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;s:1500;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:0px;" 
                            data-mask_out="x:inherit;y:inherit;" 
                            data-start="2000" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on">
                        </div>
                        <div class="tp-caption first_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['-20']"
                            data-Hoffset="['0']"
                            data-fontsize="['42','42','42','42','25']"
                            data-lineheight="['52','52','52','52','35']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="x:[105%];z:0;rX:45deg;rY:0deg;rZ:90deg;sX:1;sY:1;skX:0;skY:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1000" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" >Welcome To Our
                        </div>
                        <div class="tp-caption secand_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['45']"
                            data-Hoffset="['0']"
                            data-fontsize="['36']"
                            data-lineheight="['42']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="x:[105%];z:0;rX:45deg;rY:0deg;rZ:90deg;sX:1;sY:1;skX:0;skY:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1000" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" >Red Cayenne
                        </div>
                        <div class="tp-caption third_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['100']"
                            data-Hoffset="['0']"
                            data-fontsize="['24','24','24','24','16']"
                            data-lineheight="['34','34','34','34','26']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="y:[100%];z:0;rX:0deg;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;opacity:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:[100%];s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1200" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" >A PREMIUM RESTAURANT THEME
                        </div>
                        <div class="tp-caption btn_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['180']"
                            data-Hoffset="['0']"
                            data-fontsize="['16.75']"
                            data-lineheight="['26']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="y:[100%];z:0;rX:0deg;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;opacity:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:[100%];s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1200" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" ><a class="submit_btn_bg" href="#">Look Menu</a>
                        </div>
                    </div>
                </li>
                <li data-slotamount="7" data-easein="Power4.easeInOut" data-easeout="Power4.easeInOut" data-masterspeed="600" data-rotate="0" data-saveperformance="off">
                    <!-- MAIN IMAGE -->
                    <img src="<?php echo base_url('uploads/img/home-slider/slider-2.jpg'); ?>"  alt=""  data-bgposition="center center" data-bgfit="cover" data-bgrepeat="no-repeat" data-bgparallax="10" class="rev-slidebg" data-no-retina>
                    <!-- LAYERS -->

                    <!-- LAYER NR. 1 -->
                    <div class="slider_text_box text_box2">
                       <div class="tp-caption bg_box" 
                            data-width="none"
                            data-height="none"
                            data-whitespace="nowrap"
                            data-x="center" 
                            data-y="['350','350','300','250']"
                            data-fontsize="['55']" 
                            data-lineheight="['60']" 
                            data-transform_idle="o:1;"
                            data-transform_in="y:[-100%];z:0;rX:0deg;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;s:1500;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:0px;" 
                            data-mask_out="x:inherit;y:inherit;" 
                            data-start="2000" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on">
                        </div>
                        <div class="tp-caption first_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['-20']"
                            data-Hoffset="['0']"
                            data-fontsize="['42','42','42','42','25']"
                            data-lineheight="['52','52','52','52','35']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="x:[105%];z:0;rX:45deg;rY:0deg;rZ:90deg;sX:1;sY:1;skX:0;skY:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1000" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" >Welcome To Our
                        </div>
                        <div class="tp-caption secand_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['45']"
                            data-Hoffset="['0']"
                            data-fontsize="['36']"
                            data-lineheight="['42']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="x:[105%];z:0;rX:45deg;rY:0deg;rZ:90deg;sX:1;sY:1;skX:0;skY:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1000" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" >Red Cayenne
                        </div>
                        <div class="tp-caption third_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['100']"
                            data-Hoffset="['0']"
                            data-fontsize="['24','24','24','24','16']"
                            data-lineheight="['34','34','34','34','26']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="y:[100%];z:0;rX:0deg;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;opacity:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:[100%];s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1200" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" >A PREMIUM RESTAURANT THEME
                        </div>
                        <div class="tp-caption btn_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['180']"
                            data-Hoffset="['0']"
                            data-fontsize="['16.75']"
                            data-lineheight="['26']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="y:[100%];z:0;rX:0deg;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;opacity:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:[100%];s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1200" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" ><a class="submit_btn_bg" href="#">Look Menu</a>
                        </div>
                    </div>
                </li>
            </ul> 
        </div><!-- END REVOLUTION SLIDER -->
    </div>
</section>
<!--================End Slider Area =================-->

<!--================Booking Table Area =================-->
<section class="booking_table_area">
    <div class="container">
        <?php flash_msg(); ?>
        <div class="s_white_title">
            <h3>Book a</h3>
            <h2>Table</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.</p>
        </div>
        <?php
            $attributes = array( 'id' => 'search-form', 'enctype' => 'multipart/form-data');
            echo form_open( site_url('search'), $attributes);
        ?>
        <div class="row">
            <div class="col-sm-4">
                <div class="form-group">
                    <?php
                    $options=array();
                    $options[0]=get_msg('Prd_search_cat');
                    $conds['shop_id'] = $selected_shop_id;
                    
                    $categories = $this->Category->get_all_by($conds);
                    foreach($categories->result() as $cat) {
                        
                            $options[$cat->id]=$cat->name;
                    }
                    
                    echo form_dropdown(
                        'cat_id',
                        $options,
                        set_value( 'cat_id', show_data( $cat_id ), false ),
                        'class="form-control form-control-sm mr-3" id="cat_id"'
                    );
                ?> 
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">

                <?php
                    if($selected_cat_id != "") {

                        $options=array();
                        $options[0]=get_msg('Prd_search_subcat');
                        $conds['cat_id'] = $selected_cat_id;
                        $sub_cat = $this->Subcategory->get_all_by($conds);
                        foreach($sub_cat->result() as $subcat) {
                            $options[$subcat->id]=$subcat->name;
                        }
                        echo form_dropdown(
                            'sub_cat_id',
                            $options,
                            set_value( 'sub_cat_id', show_data( $sub_cat_id ), false ),
                            'class="form-control form-control-sm mr-3" id="sub_cat_id"'
                        );

                    } else {

                        $conds['cat_id'] = $selected_cat_id;
                        $options=array();
                        $options[0]=get_msg('Prd_search_subcat');

                        echo form_dropdown(
                            'sub_cat_id',
                            $options,
                            set_value( 'sub_cat_id', show_data( $sub_cat_id ), false ),
                            'class="form-control form-control-sm mr-3" id="sub_cat_id"'
                        );
                    }
                ?>

                </div>
            </div>
            <div class="col-sm-2">
                <button type="submit" style="background-color: red;" name="submit" value="submit" class="btn btn-default submit_btn">Search</button>
            </div>
        </div>
        <?php echo form_close(); ?>
    </div>
</section>
<!--================End Booking Table Area =================-->
<!--================End Our feature Area =================-->
<?php if(isset($products)): ?>
<section class="most_popular_item_area">
    <div class="container">
       
        <div class="p_recype_item_main">
            <div class="row p_recype_item_active" id="filtercatid">
                <?php
                    foreach($products->result() as $prd) {
                    $conds = array( 'img_type' => 'product', 'img_parent_id' => $prd->id );
                    $images = $this->Image->get_all_by( $conds )->result();
                ?>
                <div class="col-md-6" id="products">
                    <div class="media">
                        <div class="media-left">
                            <img src="<?php echo $this->ps_image->upload_url . $images[0]->img_path; ?>" alt="" style="width:150px;height: 160px;">
                        </div>
                        <div class="media-body">
                            <a href="#"><h3><?php echo $prd->name; ?></h3></a>
                            <h4>$<?php echo $prd->original_price; ?></h4>
                            <p>
                                <a href="<?php echo site_url('productdetail'); ?>">
                                <?php 
                                  $length = 120; 
                                  $text = preg_replace("/^(.{1,$length})(\s.*|$)/s", '\\1...', $prd->description);
                                  
                                  echo $text; 
                                 
                                ?>
                                </a>
                            </p>
                            <a class="read_mor_btn" href="#">Add To Cart</a>
                            <ul>
                                <li><a href="#"><i class="fa fa-star"></i></a></li>
                                <li><a href="#"><i class="fa fa-star"></i></a></li>
                                <li><a href="#"><i class="fa fa-star"></i></a></li>
                                <li><a href="#"><i class="fa fa-star"></i></a></li>
                                <li><a href="#"><i class="fa fa-star-half-o"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <?php } ?>
            </div>
        </div>
    </div>
</section>
<?php endif ?>
<!--================End Our feature Area =================-->
<!--================Our feature Area =================-->
<section class="our_feature_area">
    <div class="container">
        <div class="s_black_title">
            <h3>Featured</h3>
            <h2>Menu</h2>
        </div>
        <div class="feature_slider">
        <?php
            $conds_fea['is_featured'] = 1;
            $conds_fea['shop_id'] = $shop_id;
            $products = $this->Product->get_all_by($conds_fea)->result();
            foreach ($products as $prd) {
            $conds = array( 'img_type' => 'product', 'img_parent_id' => $prd->id );
            $images = $this->Image->get_all_by( $conds )->result();  
        ?>
            <div class="item">
                <div class="feature_item">
                    <div class="feature_item_inner">
                        <img src="<?php echo $this->ps_image->upload_url . $images[0]->img_path; ?>" alt="" style="width: 100%; height: 300px;">
                        <div class="icon_hover">
                            <i class="fa fa-search"></i>
                            <i class="fa fa-shopping-cart"></i>
                        </div>
                    </div>
                    <div class="title_text">
                        <div class="feature_left"><a href="table.html"><span><?php echo $prd->name; ?></span></a></div>
                        <div class="restaurant_feature_dots"></div>
                        <div class="feature_right">$<?php echo $prd->original_price; ?></div>
                    </div>
                </div>
            </div>
        <?php } ?>
        </div>
    </div>
</section>
<!--================End Our feature Area =================-->
<script src="<?php echo base_url( 'assets/jquery/jquery.min.js' ); ?>"></script>
<script>
$(document).ready(function(){
    $('#cat_id').on('change', function() {

        var value = $('option:selected', this).text().replace(/Value\s/, '');

        var catId = $(this).val();
        // alert("adfasd"+ catId);
         
        $.ajax({
            url: '<?php echo $module_site_url . '/get_all_sub_categories/';?>' + catId,
            method: 'GET',
            dataType: 'JSON',
            success:function(data){
                $('#sub_cat_id').html("");
                $.each(data, function(i, obj){
                    $('#sub_cat_id').append('<option value="'+ obj.id +'">' + obj.name+ '</option>');
                });
                $('#name').val($('#name').val() + " ").blur();
                $('#sub_cat_id').trigger('change');
            }
        });
    });
});
</script>