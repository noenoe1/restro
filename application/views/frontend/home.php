<!--================Slider Area =================-->
<section class="slider_area">
    <div class=slider_inner>
        <div class="rev_slider fullwidthabanner"  data-version="5.3.0.2" id="home-slider">
            <ul> 
                <li data-slotamount="7" data-easein="Power4.easeInOut" data-easeout="Power4.easeInOut" data-masterspeed="600" data-rotate="0" data-saveperformance="off">
                    <!-- MAIN IMAGE -->
                    <img src="<?php echo base_url('uploads/img/home-slider/slider-1.jpg'); ?>"  alt=""  data-bgposition="center center" data-bgfit="cover" data-bgrepeat="no-repeat" data-bgparallax="10" class="rev-slidebg" data-no-retina>
                    <!-- LAYERS -->

                    <!-- LAYER NR. 1 -->
                    <div class="slider_text_box">
                       <div class="tp-caption bg_box" 
                            data-width="none"
                            data-height="none"
                            data-whitespace="nowrap"
                            data-x="center" 
                            data-y="['350','350','300','250','0']"
                            data-fontsize="['55']" 
                            data-lineheight="['60']" 
                            data-transform_idle="o:1;"
                            data-transform_in="y:[-100%];z:0;rX:0deg;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;s:1500;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:0px;" 
                            data-mask_out="x:inherit;y:inherit;" 
                            data-start="2000" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on">
                        </div>
                        <div class="tp-caption first_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['-20']"
                            data-Hoffset="['0']"
                            data-fontsize="['42','42','42','42','25']"
                            data-lineheight="['52','52','52','52','35']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="x:[105%];z:0;rX:45deg;rY:0deg;rZ:90deg;sX:1;sY:1;skX:0;skY:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1000" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" >Welcome To Our
                        </div>
                        <div class="tp-caption secand_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['45']"
                            data-Hoffset="['0']"
                            data-fontsize="['36']"
                            data-lineheight="['42']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="x:[105%];z:0;rX:45deg;rY:0deg;rZ:90deg;sX:1;sY:1;skX:0;skY:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1000" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" >Red Cayenne
                        </div>
                        <div class="tp-caption third_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['100']"
                            data-Hoffset="['0']"
                            data-fontsize="['24','24','24','24','16']"
                            data-lineheight="['34','34','34','34','26']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="y:[100%];z:0;rX:0deg;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;opacity:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:[100%];s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1200" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" >A PREMIUM RESTAURANT THEME
                        </div>
                        <div class="tp-caption btn_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['180']"
                            data-Hoffset="['0']"
                            data-fontsize="['16.75']"
                            data-lineheight="['26']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="y:[100%];z:0;rX:0deg;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;opacity:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:[100%];s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1200" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" ><a class="submit_btn_bg" href="#">Look Menu</a>
                        </div>
                    </div>
                </li>
                <li data-slotamount="7" data-easein="Power4.easeInOut" data-easeout="Power4.easeInOut" data-masterspeed="600" data-rotate="0" data-saveperformance="off">
                    <!-- MAIN IMAGE -->
                    <img src="<?php echo base_url('uploads/img/home-slider/slider-2.jpg'); ?>"  alt=""  data-bgposition="center center" data-bgfit="cover" data-bgrepeat="no-repeat" data-bgparallax="10" class="rev-slidebg" data-no-retina>
                    <!-- LAYERS -->

                    <!-- LAYER NR. 1 -->
                    <div class="slider_text_box text_box2">
                       <div class="tp-caption bg_box" 
                            data-width="none"
                            data-height="none"
                            data-whitespace="nowrap"
                            data-x="center" 
                            data-y="['350','350','300','250']"
                            data-fontsize="['55']" 
                            data-lineheight="['60']" 
                            data-transform_idle="o:1;"
                            data-transform_in="y:[-100%];z:0;rX:0deg;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;s:1500;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:0px;" 
                            data-mask_out="x:inherit;y:inherit;" 
                            data-start="2000" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on">
                        </div>
                        <div class="tp-caption first_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['-20']"
                            data-Hoffset="['0']"
                            data-fontsize="['42','42','42','42','25']"
                            data-lineheight="['52','52','52','52','35']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="x:[105%];z:0;rX:45deg;rY:0deg;rZ:90deg;sX:1;sY:1;skX:0;skY:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1000" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" >Welcome To Our
                        </div>
                        <div class="tp-caption secand_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['45']"
                            data-Hoffset="['0']"
                            data-fontsize="['36']"
                            data-lineheight="['42']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="x:[105%];z:0;rX:45deg;rY:0deg;rZ:90deg;sX:1;sY:1;skX:0;skY:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1000" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" >Red Cayenne
                        </div>
                        <div class="tp-caption third_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['100']"
                            data-Hoffset="['0']"
                            data-fontsize="['24','24','24','24','16']"
                            data-lineheight="['34','34','34','34','26']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="y:[100%];z:0;rX:0deg;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;opacity:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:[100%];s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1200" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" >A PREMIUM RESTAURANT THEME
                        </div>
                        <div class="tp-caption btn_text" 
                            data-x="center" 
                            data-y="center" 
                            data-voffset="['180']"
                            data-Hoffset="['0']"
                            data-fontsize="['16.75']"
                            data-lineheight="['26']"
                            data-width="none"
                            data-height="none"
                            data-transform_idle="o:1;"
                            data-whitespace="nowrap"
                            data-transform_in="y:[100%];z:0;rX:0deg;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;opacity:0;s:2000;e:Power4.easeInOut;" 
                            data-transform_out="y:[100%];s:1000;e:Power2.easeInOut;s:1000;e:Power2.easeInOut;" 
                            data-mask_in="x:0px;y:[100%];s:inherit;e:inherit;" 
                            data-mask_out="x:inherit;y:inherit;s:inherit;e:inherit;" 
                            data-start="1200" 
                            data-splitin="none" 
                            data-splitout="none" 
                            data-responsive_offset="on" 
                            data-elementdelay="0.05" ><a class="submit_btn_bg" href="#">Look Menu</a>
                        </div>
                    </div>
                </li>
            </ul> 
        </div><!-- END REVOLUTION SLIDER -->
    </div>
</section>
<!--================End Slider Area =================-->
       
<!--================Booking Table Area =================-->
<section class="booking_table_area">
    <div class="container">
        <?php flash_msg(); ?>
        <div class="s_white_title">
            <h3>Book a</h3>
            <h2>Table</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.</p>
        </div>
        <?php
            $attributes = array( 'id' => 'reservation-form', 'enctype' => 'multipart/form-data');
            echo form_open( site_url('reservation'), $attributes);
        ?>
        <div class="row">
            <div class="col-sm-2">
                <div class="input-append date form_datetime">
                    <input size="16" type="text" value="" readonly placeholder="Date" name="resv_date" id="resv_date">
                    <span class="add-on"><i class="icon-th"></i></span>
                </div>
            </div>
            <div class="col-sm-2">
                <div class="input-append date form_time">
                    <input size="16" type="text" value="" readonly placeholder="Dining Time" name="resv_time" id="resv_time">
                    <span class="add-on"><i class="icon-th"></i></span>
                </div>
            </div>
            <div class="col-sm-3">
                <div class="party_size">
                    <select class="selectpicker" id="party_size" name="party_size">
                        <option value="0">Select Party Size</option>
                        <?php
                            $array = array('1' => 1, '2' => 2,'3' => 3, '4' => 4,'5' => 5, '6' => 6,'7' => 7, '8' => 8,'9' => 9, '10' => 10,'11' => 11, '12' => 12,'13' => 13, '14' => 14,'15' => 15, '16' => 16,'17' => 17, '18' => 18,'19' => 19, '20' => 20);
                            foreach ($array as $key=>$value) {

                                if($value == $status) {
                                    echo '<option value="'.$value.'" selected>Party Size_'.$key.'</option>';
                                } else {
                                    echo '<option value="'.$value.'">Party Size_'.$key.'</option>';
                                }
                            }
                        ?>
                    </select>
                </div>
            </div>
            <div class="col-sm-3">
                <div class="party_size">
                    <select class="selectpicker" id="shop_id" name="shop_id">
                        <option value="0">Restaurants</option>
                        <?php
                          $restaurants = $this->Shop->get_all( )->result();
                          foreach($restaurants as $rest) {
                            echo '<option value="'.$rest->id.'">'.$rest->name.'</option>';       
                          }
                        ?>
                    </select>
                </div>
            </div>
            <div class="col-sm-2">
                <button type="submit" style="background-color: red;" name="submit" class="btn btn-default submit_btn">BOOK MY TABLE</button>
            </div>
        </div>
        <?php echo form_close(); ?>
    </div>
</section>
<!--================End Booking Table Area =================-->
        
<!--================Our feature Area =================-->
<section class="our_feature_area">
    <div class="container">
        <div class="s_black_title">
            <h3>Book a</h3>
            <h2>Table</h2>
        </div>
        <div class="feature_slider">
        <?php
            $products = $this->Product->get_all(6)->result();
            foreach ($products as $prd) {
            $conds = array( 'img_type' => 'product', 'img_parent_id' => $prd->id );
            $images = $this->Image->get_all_by( $conds )->result();  
        ?>
            <div class="item">
                <div class="feature_item">
                    <div class="feature_item_inner">
                        <img src="<?php echo $this->ps_image->upload_url . $images[0]->img_path; ?>" alt="" style="width: 100%; height: 300px;">
                        <div class="icon_hover">
                            <i class="fa fa-search"></i>
                            <i class="fa fa-shopping-cart"></i>
                        </div>
                    </div>
                    <div class="title_text">
                        <div class="feature_left"><a href="table.html"><span><?php echo $prd->name; ?></span></a></div>
                        <div class="restaurant_feature_dots"></div>
                        <div class="feature_right">$<?php echo $prd->original_price; ?></div>
                    </div>
                </div>
            </div>
        <?php } ?>
        </div>
    </div>
</section>
<!--================End Our feature Area =================-->
        
<!--================End Our feature Area =================-->
<section class="most_popular_item_area">
    <div class="container">
        <div class="s_white_title">
            <h3>Most Popular</h3>
            <h2>Today's Menu</h2>
        </div>
        <div class="popular_filter">
            <ul id="cat_id">
                <li class="active" data-filter="*"><a href="">All</a></li>
                <?php
                    $categories = $this->Category->get_all(5)->result();
                    foreach ($categories as $cat) {
                ?>
                <li data-filter=".break" value="<?php echo $cat->id; ?>"><a href=""  id="<?php echo $cat->id; ?>" ><?php echo $cat->name; ?></a></li>
                <input type="hidden" name="catId" id="catId" value="<?php echo $cat->id; ?>">
                <?php } ?>
            </ul>
        </div>
        <div class="p_recype_item_main">
            <div class="row p_recype_item_active" id="filtercatid">
                <?php
                    $products = $this->Product->get_all(10)->result();
                    foreach ($products as $prd) {
                    $conds = array( 'img_type' => 'product', 'img_parent_id' => $prd->id );
                    $images = $this->Image->get_all_by( $conds )->result();
                ?>
                <div class="col-md-6" id="products">
                    <div class="media">
                        <div class="media-left">
                            <img src="<?php echo $this->ps_image->upload_url . $images[0]->img_path; ?>" alt="" style="width:150px;height: 160px;">
                        </div>
                        <div class="media-body">
                            <a href="<?php echo site_url('food_detail/'.$prd->id); ?>"><h3><?php echo $prd->name; ?></h3></a>
                            <h4>$<?php echo $prd->original_price; ?></h4>
                            <p>
                                <a href="<?php echo site_url('productdetail'); ?>">
                                <?php 
                                  $length = 120; 
                                  $text = preg_replace("/^(.{1,$length})(\s.*|$)/s", '\\1...', $prd->description);
                                  
                                  echo $text; 
                                 
                                ?>
                                </a>
                            </p>
                            <a class="read_mor_btn" href="#">Add To Cart</a>
                            <?php
                            //Rating Calculation Here 
                            
                            $conds['to_user_id'] = $itm->added_user_id;
                            
                            //$ratings = $this->get_room_ratings( $room_id );
                            $ratings = $this->Rate->get_all_by( $conds )->result();

                            $rating_count_value = count($ratings); 
                            $rating_total_value = 0;
                            foreach ( $ratings as $rat ) {
                            // loop each rating and get total
                              $rating_total_value += $rat->rating;
                            }
                            $final_rating =  $rating_total_value/$rating_count_value;

                            ?>

                            <ul>
                              <?php

                              for($i=1; $i<=5;$i++) {
                                if($i < $final_rating) {
                                  echo "<i class='fa fa-star checked'></i>";
                                } else {
                                  echo "<i class='fa fa-star'></i>";
                                }

                              }
                            ?>
                            </ul>
                            
                        </div>
                    </div>
                </div>
                <?php } ?>
            </div>
        </div>
    </div>
</section>
<!--================End Our feature Area =================-->
        
<!--================Our Chefs Area =================-->
<section class="our_chefs_area">
    <div class="container">
        <div class="s_black_title">
            <h3>Come</h3>
            <h2>OUR Restaurant</h2>
        </div>
        <div class="chefs_slider_active">
        <?php
            $restaurants = $this->Shop->get_all( )->result();
            foreach($restaurants as $rest) {
                $conds = array( 'img_type' => 'shop', 'img_parent_id' => $rest->id );
                $images = $this->Image->get_all_by( $conds )->result();
        ?>
            <div class="item">
                <div class="chef_item_inner">
                    <div class="chef_img">
                        <img src="<?php echo $this->ps_image->upload_url . $images[0]->img_path; ?>" alt="" style="width: 100%;height: 200px;">
                        <div class="chef_hover">
                            <a href="<?php echo site_url('restaurant').'/'.$rest->id; ?>"><h4><?php echo $rest->name; ?></h4></a>
                        </div>
                    </div>
                    <div class="chef_name">
                        <div class="name_chef_text">
                            <h3><?php echo $rest->name; ?></h3>
                            <h4></h4>
                        </div>
                        <ul>
                            <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        <?php } ?>
        </div>
    </div>
</section>
<!--================End Our Chefs Area =================-->
        
<!--================Recent Blog Area =================-->
<section class="recent_bloger_area">
    <div class="container">
        <div class="s_black_title">
            <h3>News</h3>
            <h2>Recent Blog</h2>
        </div>
        <div class="row">
        <?php
            $feeds = $this->Feed->get_all(3)->result();
            foreach($feeds as $feed) {
                $conds = array( 'img_type' => 'feed', 'img_parent_id' => $feed->id );
                $images = $this->Image->get_all_by( $conds )->result();
        ?>

            <div class="col-md-4">
                <div class="recent_blog_item">
                    <div class="blog_img">
                        <img src="<?php echo $this->ps_image->upload_url . $images[0]->img_path; ?>" alt="" style="width: 100%; height: 250px;">
                    </div>
                    <div class="recent_blog_text">
                        <div class="recent_blog_text_inner">
                            <h6><a href="#">Blogs</a></h6>
                            <a href="blog-details.html"><h5><?php echo $feed->name; ?></h5></a>
                            <p>
                                <?php 
                                  $length = 120; 
                                  $text = preg_replace("/^(.{1,$length})(\s.*|$)/s", '\\1...', $feed->description);
                                  echo $text; 
                                ?>
                            </p>
                            <a href="#">
                                <?php 
                                    $added_date = $feed->added_date;
                                    $dt = strtotime($added_date);
                                    $day = date("d", $dt);
                                    $month = date("M",$dt);
                                    $year = date("Y",$dt);
                                    echo $month . " " . $day . "," . $year;
                                ?>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        <?php } ?>
        </div>
    </div>
</section>
<!--================End Recent Blog Area =================-->

<script src="<?php echo base_url( 'assets/jquery/jquery.min.js' ); ?>"></script>
<script>
    $('.popular_filter li').on('click', function() {

        // var catId = $('#catId').val();

        var catId = $(this).attr('value');

        $.ajax({
          url: '<?php echo site_url() . '/get_all_products/';?>' + catId,
          method: 'GET',
          dataType: 'JSON',
          success:function(data){
            $('#sub_cat_id').html("");
            $('#filtercatid').empty();
            $.each(data, function(i, obj){
                // $('#products').append('<option value="'+ obj.id +'">' + obj.name+ '</option>');
                
                var newTextBoxDiv = $(document.createElement('div'))
                .attr("class", 'col-md-6');


                newTextBoxDiv.after().html(
                '<div class="media"><div class="media-left"><img src="'+obj.img+'" alt="" style="width:150px;height: 160px;"></div><div class="media-body"><a href="#"><h3>'+obj.name+'</h3></a><h4>$'+obj.original_price+'</h4><p><a href="<?php echo site_url('productdetail'); ?>">'+ obj.readmore +'</a></p><a class="read_mor_btn" href="#">Add To Cart</a><ul><li><a href="#"><i class="fa fa-star"></i></a></li><li><a href="#"><i class="fa fa-star"></i></a></li><li><a href="#"><i class="fa fa-star"></i></a></li><li><a href="#"><i class="fa fa-star"></i></a></li><li><a href="#"><i class="fa fa-star-half-o"></i></a></li></ul></div></div>');



                newTextBoxDiv.appendTo("#filtercatid");


            });

            var data_count = Object.keys(data).length;

            document.getElementById('filtercatid').style.height = data_count * 120 + "px";

            // $('#name').val($('#name').val() + " ").blur();
            $('#products').trigger('change');
          }
        });
    });
</script>